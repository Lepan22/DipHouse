
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Upload de Fotos</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  <style>
    body { font-family: sans-serif; background: #111; color: #fff; padding: 20px; }
    input, button { margin: 10px 0; padding: 8px; font-size: 1em; }
    img { max-width: 150px; margin: 10px; border-radius: 8px; }
  </style>
</head>
<body>

<h2>Upload de Fotos</h2>
<input type="file" id="fotoFile">
<br>
<button onclick="uploadFoto()">Enviar</button>

<ul id="listaFotos"></ul>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyD304qg6DdYz0gBVxDIVHW5bKUq6MabRI4",
    authDomain: "diphouse-planner.firebaseapp.com",
    databaseURL: "https://diphouse-planner-default-rtdb.firebaseio.com",
    projectId: "diphouse-planner",
    storageBucket: "diphouse-planner.appspot.com",
    messagingSenderId: "621999172821",
    appId: "1:621999172821:web:df6fed5d21cb35ff81065c"
  };
  firebase.initializeApp(firebaseConfig);
  var storage = firebase.storage();

  function uploadFoto() {
    const file = document.getElementById('fotoFile').files[0];
    if (!file) return alert('Selecione uma foto!');
    const ref = storage.ref('fotos/' + file.name);
    ref.put(file)
      .then(() => {
        alert('Foto enviada com sucesso!');
        listarFotos();
      })
      .catch(err => {
        alert('Erro ao enviar: ' + err.message);
      });
  }

  function listarFotos() {
    const lista = document.getElementById('listaFotos');
    lista.innerHTML = '';
    storage.ref('fotos').listAll().then(res => {
      res.items.forEach(item => {
        item.getDownloadURL().then(url => {
          const li = document.createElement('li');
          const img = document.createElement('img');
          img.src = url;
          li.appendChild(img);
          lista.appendChild(li);
        });
      });
    });
  }

  listarFotos();
</script>

</body>
</html>
