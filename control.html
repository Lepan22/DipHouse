<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Controle</title>
  <!-- Firebase -->
  <script src="firebase.js"></script>
</head>
<body>
  <h1>Controle</h1>

  <h2>Mensagem</h2>
  <input type="text" id="msgTexto" placeholder="Mensagem">
  <label><input type="checkbox" id="msgSom"> Som</label>
  <button onclick="enviarMsg()">Enviar</button>
  <button onclick="apagarMsg()">Apagar</button>

  <h2>Tarefas</h2>
  <input type="text" id="tarefaTexto" placeholder="Tarefa">
  <button onclick="addTarefa()">Adicionar</button>
  <ul id="listaTarefas"></ul>

  <h2>Fotos</h2>
  <input type="file" id="fotoFile">
  <button onclick="uploadFoto()">Enviar Foto</button>

  <h2>Eventos</h2>
  <input type="date" id="dataEvento">
  <input type="text" id="categoriaEvento" placeholder="Categoria">
  <button onclick="addEvento()">Adicionar Evento</button>
  <ul id="listaEventos"></ul>

<script>
  function enviarMsg() {
    var texto = document.getElementById('msgTexto').value;
    var som = document.getElementById('msgSom').checked;
    firebase.database().ref('mensagemAtual').set({ texto: texto, som: som });
  }

  function apagarMsg() {
    firebase.database().ref('mensagemAtual').remove();
  }

  function addTarefa() {
    var texto = document.getElementById('tarefaTexto').value;
    firebase.database().ref('tarefas').push({ texto: texto });
  }

  firebase.database().ref('tarefas').on('value', function(snapshot) {
    var lista = document.getElementById('listaTarefas');
    lista.innerHTML = '';
    snapshot.forEach(function(child) {
      var li = document.createElement('li');
      li.textContent = child.val().texto;
      lista.appendChild(li);
    });
  });

  function uploadFoto() {
    var file = document.getElementById('fotoFile').files[0];
    var storageRef = firebase.storage().ref('fotos/' + file.name);
    storageRef.put(file).then(function() { alert('Foto enviada!'); });
  }

  function addEvento() {
    var data = document.getElementById('dataEvento').value;
    var categoria = document.getElementById('categoriaEvento').value;
    firebase.database().ref('eventos').push({ data: data, categoria: categoria });
  }

  firebase.database().ref('eventos').on('value', function(snapshot) {
    var lista = document.getElementById('listaEventos');
    lista.innerHTML = '';
    snapshot.forEach(function(child) {
      var li = document.createElement('li');
      li.textContent = child.val().data + ' â€” ' + child.val().categoria;
      lista.appendChild(li);
    });
  });
</script>
</body>
</html>
