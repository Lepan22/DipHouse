<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel - Carrossel</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #111;
      color: #fff;
    }
    .painel {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      padding: 20px;
    }
    .bloco {
      background: #222;
      padding: 15px;
      border-radius: 10px;
    }
    .foto-carrossel img {
      width: 100%;
      height: auto;
      max-height: 400px;
      object-fit: cover;
      border-radius: 10px;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
</head>
<body>

<div class="painel">
  <div class="bloco foto-carrossel">
    <img id="carrossel" src="" alt="Carrossel">
  </div>
</div>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyAa_IPmOWZ4-KpWIC7huhhl7mYjYfEJhDk",
    authDomain: "diphouse-control.firebaseapp.com",
    databaseURL: "https://diphouse-control-default-rtdb.firebaseio.com",
    projectId: "diphouse-control",
    storageBucket: "diphouse-control.appspot.com",
    messagingSenderId: "126387069829",
    appId: "1:126387069829:web:7e365252a98da884075aec"
  };
  firebase.initializeApp(firebaseConfig);
  var storage = firebase.storage();

  var fotos = [];
  var idx = 0;

  function carregarFotos() {
    fotos = [];
    storage.ref('fotos').listAll().then(function(res) {
      var promises = res.items.map(function(itemRef) {
        return itemRef.getDownloadURL().then(function(url) {
          fotos.push(url);
        });
      });
      Promise.all(promises).then(function() {
        if (fotos.length > 0) {
          trocarFoto();
          setInterval(trocarFoto, 5000);
        }
      });
    });
  }

  function trocarFoto() {
    if (fotos.length > 0) {
      document.getElementById('carrossel').src = fotos[idx];
      idx = (idx + 1) % fotos.length;
    }
  }

  carregarFotos();
</script>

</body>
</html>
